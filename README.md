# Flippy
Flippy is an othello engine, continued from the final project in CS 2 at Caltech. The Java GUI and wrapper come in a precompiled JAR from the CS 2 class. Run make in the main
directory and then run

`testgame [player1] [player2] [timelimit]`

where `player1` and `player2` are the names of program executables, or `Human`.
Time limit is given in milliseconds.

### Implementation
The engine uses a principal variation search, bitboards, an opening book, an endgame solver, hash tables, and pattern evaluations.

The midgame search uses a two bucket hashtable with Zobrist hashing, and move ordering with internal iterative deepening, fastest first, and a piece-square table.

The bitboards are based on the "Classical Approach" to chess bitboards (https://chessprogramming.wikispaces.com/Classical+Approach) and achieve about 1s PERFT 11.

Pattern evaluations were fully trained from random positions generated by Flippy through selfplay.

The endgame solver is highly optimized using internal iterative deepening, an optimized hashtable, fastest-first move ordering, special functions for solving 1-4 squares left, and aspiration windows. Current performance on the FFO test suite (A good explanation is available on http://www.radagast.se/othello/ffotest.html) is 1229 seconds and 21.666.355.586 nodes searched. The test was performed on one core of a i7-7700k.

### Makefile
To compile the tools used to create the opening book and pattern evaluations, run "make evaltools". It is a good idea to compile with `PRINT_SEARCH_INFO` set to `false` in common.h before using any of these.
 - `evalbuilder`: contains many tools for creating training data, evaluation patterns, and statistical analyses
 - `tuneheuristic`: self-plays engine using heuristic and end_heuristic on 16400 games, white and black on each of the 8200 PERFT 6 positions
 - `crtbk`: creates an opening book using the engine search

### Known bugs
 - Opening book does not take into account side to move
